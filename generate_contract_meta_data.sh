#!/bin/bash

for dir in contracts/*/; do
  package=$(basename ${dir})
  destdir=lib/contract_meta_data/${package}
  mkdir -p ${destdir}
  destfile=${destdir}/meta_data.go

  echo // This file is generated by \"make metadata\", please do not edit it > $destfile
  echo  >> $destfile
  echo package ${package} >> $destfile
  echo >> $destfile
  echo var ABI = \"$(cat $dir*.abi|sed 's/"/\\"/g')\" >> $destfile
  echo var Bin = \"$(cat $dir*.bin)\" >> $destfile
done
